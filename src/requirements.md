## 3. Требования

### 3.1 Stakeholder requirements

1. **SR-SH-1 (Инициатор — прозрачность и скорость)**  
   1.1. Система должна позволять Инициатору создавать документ, загружать файл, заполнять реквизиты и запускать его по маршруту согласования так, чтобы Инициатор в любой момент видел актуальный статус прохождения и получал уведомления о ключевых событиях (согласование, отказ, подпись).

2. **SR-SH-2 (Согласующий — удобство принятия решений)**  
   2.1. Система должна предоставлять Согласующему задачу с полной информацией (документ, история версий, комментарии предыдущих участников), чтобы он мог принять решение (согласовать, отклонить, делегировать) без обращения к сторонним системам.

3. **SR-SH-3 (Юрист — контроль версий и правки)**  
   3.1. Система должна обеспечивать Юристу возможность загружать отредактированную версию документа с сохранением предыдущих версий, чтобы все участники маршрута видели, что именно было изменено.

4. **SR-SH-4 (Бухгалтер — проверка лимитов и реквизитов)**  
   4.1. Система должна предоставлять Бухгалтеру информацию о бюджетных лимитах и реквизитах контрагента при обработке заявки на оплату, чтобы минимизировать ошибки и задержки при финансовых операциях.

5. **SR-SH-5 (Администратор — управляемость и мониторинг)**  
   5.1. Система должна позволять Администратору настраивать маршруты, шаблоны, права доступа и просматривать журнал аудита, чтобы обеспечивать корректную работу платформы и оперативно реагировать на инциденты.

6. **SR-SH-6 (Контрагент — юридически значимый обмен)**  
   6.1. Система должна обеспечивать обмен документами с Контрагентом через оператора ЭДО с поддержкой встречной КЭП, чтобы обе стороны получали юридически значимые экземпляры.

7. **SR-SH-7 (Все роли — непрерывность работы)**  
   7.1. Система должна продолжать функционировать при недоступности внешних систем (AD/LDAP, ERP, криптопровайдер, ЭДО) в режиме деградации с последующей синхронизацией, чтобы пользователи не теряли возможность выполнять критичные операции.

8. **SR-SH-8 (Все роли — мобильный доступ)**  
   8.1. Система должна поддерживать работу с мобильных устройств (просмотр, согласование, подписание УНЭП), чтобы сотрудники могли обрабатывать срочные задачи вне офиса.

9. **SR-SH-9 (Менеджмент — контроль сроков)**  
   9.1. Система должна контролировать сроки согласования (SLA) и автоматически эскалировать просроченные задачи, чтобы документы не «зависали» на промежуточных этапах.

10. **SR-SH-10 (Юрист / Регулятор — юридическая значимость)**  
    10.1. Система должна формировать неизменяемый аудиторский след по каждому документу, чтобы в случае спора или проверки можно было восстановить полную картину событий и подтвердить подлинность подписей.

11. **SR-SH-11 (Все роли — коллегиальное согласование)**  
    11.1. Система должна поддерживать параллельное согласование несколькими участниками с агрегацией результатов (голосование), чтобы стратегические документы проходили одобрение всех заинтересованных руководителей.

12. **SR-SH-12 (Бизнес — долгосрочное хранение)**  
    12.1. Система должна обеспечивать передачу завершённых дел в долговременный архив с сохранением подписей и метаданных, чтобы выполнять требования ФЗ-125 (хранение 5+ лет).

---

### 3.2 System requirements

#### Аутентификация и авторизация

1. **SR-SYS-1 (Сценарий 1–5: аутентификация через AD/LDAP)**  
   1.1. Модуль аутентификации (SSO) должен при входе пользователя отправлять запрос на проверку учётных данных в корпоративный каталог (AD/LDAP) и при успешном ответе выдавать токен сессии, содержащий: ID пользователя, список ролей, список групп, время истечения.  
   1.2. **Верификация:** интеграционный тест (вход → проверка полей токена).

2. **SR-SYS-2 (Сценарий 1–5: деградация аутентификации)**  
   2.1. При недоступности корпоративного каталога (AD/LDAP) система должна: (а) продолжать обслуживать пользователей с действующим токеном; (б) предоставлять Администратору интерфейс ручной аутентификации с фиксацией в журнале аудита записи «Резервная аутентификация».  
   2.2. **Верификация:** функциональный тест (отключение AD → проверка обоих сценариев).

3. **SR-SYS-3 (Сценарий 1–5: управление правами доступа)**  
   3.1. Система должна предоставлять Администратору интерфейс управления RBAC (ролевой доступ): создание ролей, назначение разрешений (создание документа, согласование, подписание, просмотр аудита, настройка маршрутов), привязка ролей к пользователям.  
   3.2. **Верификация:** функциональный тест (создание роли → назначение → проверка доступа).

#### Создание и маршрутизация документов (Сценарий 1)

4. **SR-SYS-4 (Сценарий 1: создание карточки документа)**  
   4.1. Система должна предоставлять Инициатору возможность создать карточку документа с атрибутами: тип документа, контрагент, сумма, предмет, статья расходов, загруженный файл (Версия 1), и присвоить карточке уникальный ID и временную метку создания.  
   4.2. **Верификация:** функциональный тест (создание карточки → проверка полей в БД).

5. **SR-SYS-5 (Сценарий 1: определение маршрута)**  
   5.1. После создания карточки Маршрутизатор должен обратиться к Справочнику оргструктуры, определить последовательность согласования (по типу документа и настроенному шаблону маршрута) и сформировать первую задачу на указанную роль.  
   5.2. **Верификация:** функциональный тест (создание договора → проверка: задача создана на роль «Юрист»).

6. **SR-SYS-6 (Сценарий 1: уведомление участника)**  
   6.1. При формировании задачи на согласование система должна отправить уведомление адресату через Сервис уведомлений (Email и/или Push) с указанием: ID документа, тип, имя инициатора, крайний срок (SLA).  
   6.2. **Верификация:** интеграционный тест (задача создана → уведомление доставлено → проверка содержимого).

7. **SR-SYS-7 (Сценарий 1: загрузка новой версии)**  
   7.1. Система должна позволять участнику маршрута (Юрист, Согласующий) загрузить новую версию файла с текстовым комментарием. Репозиторий документов должен сохранить файл, его хеш (SHA-256), номер версии и связь с карточкой.  
   7.2. **Верификация:** функциональный тест (загрузка версии → проверка: файл, хеш, номер версии в хранилище).

8. **SR-SYS-8 (Сценарий 1: просмотр разницы версий)**  
   8.1. Система должна предоставлять участнику маршрута возможность просмотреть список всех версий документа с атрибутами: номер версии, автор, дата, комментарий, хеш, и скачать любую из них.  
   8.2. **Верификация:** функциональный тест (загрузка 2 версий → проверка отображения списка).

9. **SR-SYS-9 (Сценарий 1: согласование и переход по маршруту)**  
   9.1. При нажатии «Согласовано» система должна зафиксировать визу (ID пользователя, временная метка, решение) в журнале аудита и автоматически передать задачу следующему участнику маршрута.  
   9.2. **Верификация:** функциональный тест (виза Юриста → задача у Согласующего).

10. **SR-SYS-10 (Сценарий 1: отклонение и возврат на доработку)**  
    10.1. При нажатии «Отклонить» система должна потребовать текстовый комментарий с причиной, зафиксировать отказ в журнале аудита, перевести документ в статус «Доработка» и вернуть задачу Инициатору.  
    10.2. **Верификация:** функциональный тест (отклонение → статус «Доработка» → задача у Инициатора).

11. **SR-SYS-11 (Сценарий 1: обнаружение конфликта версий)**  
    11.1. Если с момента открытия задачи текущим участником другой участник загрузил новую версию файла, при попытке согласовать или загрузить свою версию система должна отобразить предупреждение о конфликте версий и заблокировать операцию до разрешения конфликта.  
    11.2. **Верификация:** функциональный тест (параллельная загрузка 2 версий → предупреждение).

#### Электронная подпись (Сценарий 1, 2)

12. **SR-SYS-12 (Сценарий 1: наложение КЭП)**  
    12.1. При подписании документа Модуль КЭП/УНЭП должен: (а) вычислить хеш подписываемого файла; (б) отправить хеш в криптопровайдер; (в) получить подписанный хеш и штамп времени (TSP); (г) сохранить подпись в карточке документа; (д) записать в журнал аудита: ID подписанта, хеш, серийный номер сертификата, временную метку.  
    12.2. **Верификация:** интеграционный тест (подписание → проверка хеша, штампа, записи аудита).

13. **SR-SYS-13 (Сценарий 1: проверка сертификата перед подписанием)**  
    13.1. Перед подписанием система должна проверить статус сертификата через OCSP-запрос к криптопровайдеру. Если сертификат отозван или истёк — заблокировать кнопку «Подписать» и предложить перевыпуск или делегирование.  
    13.2. **Верификация:** функциональный тест (отозванный сертификат → кнопка заблокирована).

14. **SR-SYS-14 (Сценарий 1, 2: деградация подписи)**  
    14.1. При недоступности криптопровайдера система должна перевести документ в статус «Ожидание подписи (оффлайн)», разрешить проставление внутренней визы без юридической силы и поставить документ в очередь на подписание при восстановлении.  
    14.2. **Верификация:** функциональный тест (отключение криптопровайдера → статус, виза, очередь).

#### Обмен с контрагентом через ЭДО (Сценарий 1)

15. **SR-SYS-15 (Сценарий 1: отправка документа контрагенту)**  
    15.1. После подписания КЭП всеми внутренними участниками Модуль ЭДО должен отправить документ контрагенту через внешнего оператора ЭДО и зафиксировать в журнале аудита факт отправки и квитанцию оператора.  
    15.2. **Верификация:** интеграционный тест (подписание → отправка → квитанция в аудите).

16. **SR-SYS-16 (Сценарий 1: приём встречной подписи и протокола разногласий)**  
    16.1. При получении от оператора ЭДО подписанного контрагентом документа система должна проверить КЭП контрагента (OCSP), сохранить экземпляр, уведомить Инициатора. При получении протокола разногласий — вернуть задачу Инициатору/Юристу с комментариями контрагента.  
    16.2. **Верификация:** интеграционный тест (входящий документ → проверка КЭП → уведомление).

#### Мобильное согласование (Сценарий 2)

17. **SR-SYS-17 (Сценарий 2: согласование с мобильного устройства)**  
    17.1. Система должна предоставлять мобильный интерфейс (приложение или адаптивная веб-версия), позволяющий Согласующему: просматривать документ (PDF), выбирать решение (согласовать / отклонить), подписывать УНЭП (через SMS-код).  
    17.2. **Верификация:** функциональный тест на мобильном устройстве.

18. **SR-SYS-18 (Сценарий 2: оффлайн-режим мобильного приложения)**  
    18.1. При отсутствии сетевого соединения мобильное приложение должно сохранять решение пользователя локально и синхронизировать с сервером при восстановлении связи с пометкой в аудите «Подписано в оффлайн-режиме» и фактическим временем решения.  
    18.2. **Верификация:** функциональный тест (оффлайн → решение → восстановление → проверка аудита).

19. **SR-SYS-19 (Сценарий 2: отложенная подпись КЭП)**  
    19.1. Если документ требует КЭП, а на мобильном устройстве сертификат отсутствует, система должна перевести задачу в статус «Ожидает подпись с ПК» с указанием срока (по умолчанию 24 часа) и отправить напоминание.  
    19.2. **Верификация:** функциональный тест (мобильное → нет КЭП → статус → напоминание).

#### Заявка на оплату и контроль лимитов (Сценарий 3)

20. **SR-SYS-20 (Сценарий 3: автоматическая проверка лимитов)**  
    20.1. При создании заявки на оплату система должна автоматически запросить у ERP: остаток бюджета по статье расходов, лимит договора, статус контрагента. Если остаток >= сумма заявки и контрагент активен — направить задачу Бухгалтеру. Иначе — заблокировать отправку.  
    20.2. **Верификация:** функциональный тест (заявка в лимите → задача бухгалтеру; сверх лимита → блокировка).

21. **SR-SYS-21 (Сценарий 3: эскалация при превышении лимита)**  
    21.1. При превышении бюджетного лимита Маршрутизатор должен через Справочник оргструктуры найти вышестоящего руководителя или финансового директора и добавить его в цепочку согласования. Заявка переходит в статус «Ожидание бюджета».  
    21.2. **Верификация:** функциональный тест (превышение → задача у финдиректора → статус).

22. **SR-SYS-22 (Сценарий 3: деградация при недоступности ERP)**  
    22.1. При недоступности ERP система должна: (а) отобразить Бухгалтеру пометку «Проверить лимиты вручную»; (б) предоставить чекбокс «Лимит подтверждён вручную»; (в) при активации чекбокса зафиксировать в аудите: ID бухгалтера, временная метка, пометка «Ручной ввод, ERP недоступна».  
    22.2. **Верификация:** функциональный тест (отключение ERP → пометка → чекбокс → запись аудита).

23. **SR-SYS-23 (Сценарий 3: блокировка при отсутствии контрагента)**  
    23.1. Если ERP возвращает «контрагент не найден», система должна заблокировать отправку заявки бухгалтеру и уведомить Инициатора с требованием завести контрагента в ERP/CRM.  
    23.2. **Верификация:** функциональный тест (контрагент отсутствует → блокировка → уведомление).

#### Коллегиальное согласование (Сценарий 4)

24. **SR-SYS-24 (Сценарий 4: параллельная рассылка задач)**  
    24.1. При запуске параллельного маршрута Маршрутизатор должен одновременно создать задачи для всех указанных Согласующих (по ролям из Справочника оргструктуры) и отправить каждому уведомление.  
    24.2. **Верификация:** функциональный тест (запуск → проверка: N задач создано одновременно).

25. **SR-SYS-25 (Сценарий 4: агрегация голосов)**  
    25.1. Система должна принимать голоса («За» / «Против» / «Воздержался» / «За, с замечаниями»), агрегировать их по настроенному правилу (единогласно, большинство, кворум) и по достижении результата уведомить Инициатора с протоколом: решение каждого участника, комментарии, итог.  
    25.2. **Верификация:** функциональный тест (3 голоса → агрегация → проверка итога по правилу).

26. **SR-SYS-26 (Сценарий 4: тайм-аут и политика молчания)**  
    26.1. Если к дедлайну SLA не все участники проголосовали, система должна применить настроенную политику: «Молчание — знак согласия» (голос не подавших = «За») или «Решение по кворуму» (учитываются только поданные голоса). Результат фиксируется в аудите с пометкой «Применена политика тайм-аута».  
    26.2. **Верификация:** функциональный тест (2 из 3 голосов + тайм-аут → проверка результата и записи аудита).

#### Контроль сроков и уведомления (Сценарий 1–4)

27. **SR-SYS-27 (Сценарий 1–4: напоминания SLA)**  
    27.1. Если задача не обработана за N% от установленного срока SLA (настраивается Администратором), система должна отправить напоминание адресату. При полном истечении SLA — отправить эскалацию вышестоящему руководителю (из Справочника оргструктуры).  
    27.2. **Верификация:** функциональный тест (задача просрочена → напоминание → эскалация).

28. **SR-SYS-28 (Сценарий 1–4: делегирование заместителю)**  
    28.1. Согласующий должен иметь возможность делегировать задачу заместителю. Система должна проверить замещение через Справочник оргструктуры, переназначить задачу и зафиксировать делегирование в аудите.  
    28.2. **Верификация:** функциональный тест (делегирование → задача у заместителя → запись аудита).

#### Аудит и архивация (Сценарий 5)

29. **SR-SYS-29 (Сценарий 5: неизменяемый журнал аудита)**  
    29.1. Каждое значимое действие (создание, загрузка версии, виза, подпись, отправка через ЭДО, изменение статуса) должно фиксироваться в Журнале аудита с атрибутами: ID события, ID пользователя, временная метка, IP-адрес, тип действия, хеш файла (если применимо). Записи должны быть связаны криптографической цепочкой (каждая запись содержит хеш предыдущей).  
    29.2. **Верификация:** инспекция архитектуры + функциональный тест (серия действий → проверка цепочки хешей).

30. **SR-SYS-30 (Сценарий 5: экспорт акта аудита)**  
    30.1. Система должна предоставлять Юристу/Администратору возможность экспортировать акт аудита по конкретному документу в формате PDF с системной печатью платформы, содержащий: полную ленту событий, хеши файлов, данные подписей.  
    30.2. **Верификация:** функциональный тест (экспорт → проверка содержимого PDF).

31. **SR-SYS-31 (Сценарий 5: проверка подписи при просмотре)**  
    31.1. При открытии подписанного документа система должна автоматически проверить статус сертификата подписанта через OCSP на момент подписания (по сохранённой метке времени TSP) и отобразить результат: «Подпись действительна» или «Подпись недействительна» с указанием причины.  
    31.2. **Верификация:** функциональный тест (документ с отозванным после подписания сертификатом → «действительна»; отозванным до → «недействительна»).

32. **SR-SYS-32 (Сценарий 5: передача в долговременный архив)**  
    32.1. После завершения всех согласований и подписаний (включая встречную КЭП контрагента, если применимо) система должна передать завершённое дело в Долговременный архив: файлы всех версий, подписи, метаданные карточки, лента аудита. Статус документа меняется на «Архивирован».  
    32.2. **Верификация:** интеграционный тест (завершение → проверка данных в архиве → статус).

33. **SR-SYS-33 (Сценарий 5: извлечение из архива)**  
    33.1. Система должна предоставлять Юристу/Администратору возможность запросить документ из Долговременного архива по ID карточки и получить все файлы, подписи и метаданные.  
    33.2. **Верификация:** функциональный тест (запрос архивированного документа → получение).

#### Справочник оргструктуры (Сценарий 1–4)

34. **SR-SYS-34 (Сценарий 1–4: синхронизация оргструктуры)**  
    34.1. Справочник оргструктуры должен периодически (настраиваемый интервал, по умолчанию 1 раз в сутки) синхронизироваться с HR-системой и обновлять данные: сотрудники, роли, иерархия, замещения.  
    34.2. **Верификация:** интеграционный тест (изменение в HR → синхронизация → проверка справочника).

35. **SR-SYS-35 (Сценарий 1–4: деградация при недоступности HR-системы)**  
    35.1. При недоступности HR-системы Маршрутизатор должен использовать последнюю кэшированную версию Справочника оргструктуры и назначать задачи по ролям (не по конкретным ФИО). При восстановлении — автоматическая синхронизация.  
    35.2. **Верификация:** функциональный тест (отключение HR → маршрутизация по кэшу → восстановление → синхронизация).

---

### 3.3 NFR / качество с метриками

#### Методика измерения SLA для данного проекта

Во всех NFR-требованиях ниже используются следующие понятия и правила измерения:

**SLA (Service Level Agreement)** — набор измеримых показателей качества работы платформы, по которым ежемесячно формируется SLA-отчёт. В рамках данного проекта SLA включает:

- **Доступность (Availability)** — доля времени, в течение которого функция платформы принимает и корректно обрабатывает запросы пользователей. Измеряется как:

```Availability = (T_рабочее − T_простоя) / T_рабочее × 100%```

где `T_рабочее` — суммарное рабочее время за календарный месяц (пн–пт, 08:00–20:00 MSK), `T_простоя` — суммарное время, когда функция не отвечала или отвечала с ошибкой. **Плановые окна обслуживания** (согласованные заранее) исключаются из `T_простоя`, но включаются в `T_рабочее` только если выходят за согласованный лимит.

- **Время отклика (Response Time)** — интервал от момента отправки запроса пользователем (нажатие кнопки в интерфейсе) до момента отображения результата (успех/ошибка). Измеряется на стороне сервера приложений (без учёта задержки сети клиента). Указывается в виде **перцентиля**: p95 означает, что 95% запросов укладываются в заданный порог.

- **Перцентиль (pN)** — значение метрики, ниже которого находится N% всех измерений за отчётный период (месяц). Например, p95 = 2 с означает, что 95 из 100 запросов обработаны быстрее 2 секунд.

- **Нагрузочный профиль** — если в NFR указано «при нагрузке до N одновременных пользователей», подразумевается, что N пользователей одновременно выполняют типичные операции (создание документа, согласование, просмотр). Моделируется при нагрузочном тестировании.

- **RPO (Recovery Point Objective)** — максимально допустимый объём потерянных данных, выраженный во времени. RPO = 15 минут означает, что при аварии могут быть потеряны данные, введённые не более чем за последние 15 минут.

- **RTO (Recovery Time Objective)** — максимально допустимое время от момента аварии до полного возобновления работы платформы.

- **Отчётный период** — календарный месяц. SLA-отчёт формируется автоматически на основе логов платформы и включает: доступность по каждой критичной функции, распределение времени отклика (p50, p95, p99), количество и длительность инцидентов, использованное время плановых окон.

---

1. **NFR-1 (Производительность: отклик при создании/отправке документа)**  
   1.1. При создании карточки документа и отправке на маршрут система должна отображать результат операции (успех/ошибка) с временем отклика **≤ 2 секунд** в **p95** при нагрузке до **200 одновременных активных пользователей**.  
   1.2. **Верификация:** нагрузочное тестирование (замер p95).

2. **NFR-2 (Производительность: наложение подписи КЭП)**  
   2.1. Операция наложения КЭП (от нажатия кнопки до отображения результата) должна завершаться за **≤ 5 секунд** в **p95**, включая обращение к криптопровайдеру (OCSP + TSP).  
   2.2. **Верификация:** нагрузочное тестирование (замер p95 при 50 параллельных подписаниях).

3. **NFR-3 (Доступность: основные операции)**  
   3.1. Функции создания документа, согласования и подписания должны быть доступны с коэффициентом **≥ 99,5%** в рабочие часы (08:00–20:00 MSK, пн–пт), исключая плановые окна обслуживания **не более 4 часов в месяц**.  
   3.2. **Верификация:** SLA-отчёт (анализ логов за календарный месяц).

4. **NFR-4 (Доступность: переключение в режим деградации)**  
   4.1. При недоступности любой одной внешней системы (AD/LDAP, ERP, криптопровайдер, оператор ЭДО, HR-система, шлюз уведомлений) платформа должна переключиться в fallback-режим за **≤ 30 секунд** от момента обнаружения сбоя и продолжать обслуживать операции, не зависящие от этой системы.  
   4.2. **Верификация:** тест отказоустойчивости (отключение внешней системы → замер времени переключения).

5. **NFR-5 (Безопасность: целостность журнала аудита)**  
   5.1. Журнал аудита должен обеспечивать обнаружение любой модификации или удаления записей. Записи связаны криптографической цепочкой (хеш каждой записи включает хеш предыдущей). Время обнаружения нарушения целостности — **≤ 1 минута** с момента модификации.  
   5.2. **Верификация:** тест безопасности (прямая модификация записи в БД → проверка обнаружения и алерта).

6. **NFR-6 (Безопасность: шифрование данных)**  
   6.1. Все данные должны передаваться между компонентами платформы и внешними системами по шифрованному каналу (**TLS 1.2+**). Файлы документов и подписи в хранилище должны быть зашифрованы в состоянии покоя (**AES-256** или аналог).  
   6.2. **Верификация:** инспекция конфигурации + тест перехвата трафика (отсутствие данных в открытом виде).

7. **NFR-7 (Масштабируемость: пользователи и документы)**  
   7.1. Система должна поддерживать **до 500 одновременных пользователей** и хранение **до 1 000 000 карточек документов** с суммарным объёмом файлов **до 5 ТБ** без деградации производительности ниже порогов NFR-1 и NFR-2.  
   7.2. **Верификация:** нагрузочное тестирование на целевых объёмах данных.

8. **NFR-8 (Восстановление: RPO и RTO)**  
   8.1. Целевая точка восстановления: **RPO ≤ 15 минут**. Целевое время восстановления: **RTO ≤ 1 час**.  
   8.2. **Верификация:** тест аварийного восстановления (имитация отказа → замер фактических RPO и RTO).

9. **NFR-9 (Удобство: время обучения нового пользователя)**  
   9.1. Новый сотрудник с ролью «Инициатор» должен быть способен самостоятельно создать документ и отправить на маршрут после обучения **не более 30 минут** (инструкция + 2 тренировочных документа).  
   9.2. **Верификация:** юзабилити-тест (группа из 5 новых пользователей, замер времени до успешного выполнения задания).

10. **NFR-10 (Совместимость: браузеры и устройства)**  
    10.1. Веб-интерфейс должен корректно работать в браузерах: **Chrome 100+**, **Firefox 100+**, **Яндекс.Браузер 22+**, **Edge 100+**. Мобильный интерфейс — на устройствах с **Android 10+** и **iOS 15+**, разрешение экрана от **360×640 px**.  
    10.2. **Верификация:** кроссбраузерное тестирование + тестирование на мобильных устройствах.

11. **NFR-11 (Архивация: передача дел в долговременный архив)**  
    11.1. Платформа должна обеспечивать автоматическую передачу завершённого дела (файлы, подписи, метаданные, лента аудита) в Долговременный архив в течение **≤ 24 часов** после перехода документа в финальный статус. Передача должна завершаться с подтверждением: квитанция от архива с ID дела и контрольной суммой.  
    11.2. Платформа не является системой долговременного хранения. Ответственность за обеспечение сроков хранения (5+ лет, ФЗ-125) несёт внешний Долговременный архив. Платформа обязана передать полный комплект данных и зафиксировать факт передачи в журнале аудита.  
    11.3. **Верификация:** интеграционный тест (завершение дела → замер времени до квитанции архива → проверка комплектности переданных данных).

12. **NFR-12 (Производительность: доставка уведомлений)**  
    12.1. Сервис уведомлений должен передать Email-уведомление на Шлюз уведомлений с задержкой **≤ 60 секунд** в **p95** от момента события в платформе. Push-уведомления — **≤ 10 секунд** в **p95**. Метрика измеряется от записи события до подтверждения приёма шлюзом (далее доставка зависит от внешнего шлюза).  
    12.2. **Верификация:** нагрузочное тестирование (замер задержки от события до подтверждения приёма шлюзом).
